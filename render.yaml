services:
  - type: web
    name: mision3d
    env: node
    region: oregon
    plan: free
    buildCommand: cd backend && npm install
    startCommand: cd backend && npm start
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: production
      - key: FLOW_API_KEY
        sync: false
      - key: FLOW_SECRET
        sync: false
      - key: FLOW_BASE_URL
        value: https://www.flow.cl/api
      - key: FLOW_RETURN_URL
        value: https://mision3d.cl/flow/retorno
      - key: FLOW_CONFIRM_URL
        value: https://mision3d.cl/flow/confirm
      - key: ALLOWED_ORIGINS
        value: https://mision3d.cl,https://www.mision3d.cl,https://mision3dcl.pages.dev
      - key: SUPABASE_WEBHOOK_KEY
        sync: false
      - key: RESEND_API_KEY
        sync: false
      - key: EMAIL_FROM
        value: Mision 3D <onboarding@resend.dev>
      - key: FIREBASE_DATABASE_URL
        sync: false
      - key: FIREBASE_CREDENTIALS_JSON
        sync: false
